# サウナ飯のレビューアプリ

TypeScript やリレーショナルデータベースを用いてフルスタックに開発してみたかったから作りました。
あとは、自分がサウナとサウナ施設で飯を食べることが好きなのも理由です。

## 開発期間

2024/10~
<br>
現在も開発継続中。特にフロントエンドの部分の修正を行なっています。

## URL

※まだデプロイしてない

## 使用技術

### フロントエンド

- Next.js
- TypeScript
- Tailwind CSS

### バックエンド

- Node.js
- Express.js

### データベース,ORM

- PostgreSQL
- prisma

### その他

- 認証: Firebase Authentication
- 状態管理: React Context API
- 画像保存先:Cloud Storage for Firebase

## アプリの概要

1. **認証機能**
   - ユーザー新規登録
   - ログイン/ログアウト
2. **サウナ施設 page**
   - 一覧ページ
     - 新規で施設の追加(ログインユーザーのみ)
     - 検索機能
     - ページネーション
   - 詳細ページ
      - 施設の編集、削除(その施設を登録したユーザーのみ)
      - サウナ飯の追加
      - その施設のサウナ飯一覧(クリックするとサウナ飯詳細ページに飛ぶ)
3. **サウナ飯 page**
   - 一覧ページ
     - 検索機能
     - ページネーション
   - 詳細ページ
     - レビュー追加
4. **プロフィール機能**
   - 個人情報
   - 投稿したレビュー内容が確認できる

## 工夫点
### FirebaseのAuthをサーバー側で利用
#### 目的
簡潔に言えば、アプリケーションのセキュリティの向上。認証されたユーザーのみが特定のエンドポイントにアクセスできるようにし、データの不正アクセスを防ぐため
#### 具体的に何をしたか
 - authMiddlewareを使用して、リクエストのヘッダーからトークンを取得し、Firebaseで検証。これにより、認証ロジックを一元管理し、一貫した認証処理を適用した
 - トークンが存在しない場合や無効な場合に適切なエラーメッセージを返すことで、クライアント側での問題解決を容易にし、ユーザー体験を向上。
 - FirebaseのUIDを使用してデータベースにユーザー情報を保存することで、ユーザーの一意性を確保し、データの整合性を保つ

### SSRでの検索処理を行いリアルタイムな検索機能を提供
#### 目的
ユーザーが入力した検索ワードに基づいて、サーバーサイドでデータをフィルタリングし、即座に結果を反映させることで、ユーザー体験を向上させる。
#### 具体的に何をしたか
 - server actionで取得したデータに対して、施設名や住所に基づいてフィルタリングを行うロジックを実装した。これにより、ユーザーが入力した検索ワードに一致する施設のみを返せる
 - useEffectフックを使用して、検索ワードが変更されるたびにサーバーから最新のデータを取得し、リアルタイムで結果を表示した。

## データベース構造
<p align="center">
  <img src="https://github.com/user-attachments/assets/5b081c55-a0e6-45bc-8a62-6dfc2a22f1f8" width="50%" height="50%" />
</p>

## ディレクトリ

後々記載

```

```

